[database]
host = "localhost"
port = 5432
username = "postgres"
password = "password"
database_name = "helium"
max_connections = 10
min_connections = 2
acquire_timeout_seconds = 30
idle_timeout_seconds = 600
max_lifetime_seconds = 1800

# Signing keypair settings
[signing]
keypair_path = "/app/keypair.bin"  # Path to Helium keypair file

[ingestor]
grpc_endpoint = "http://localhost:8080"
timeout_seconds = 30
max_retries = 3
retry_delay_seconds = 5
tls_enabled = false

[service]
polling_interval_seconds = 10
batch_size = 100
max_concurrent_publishes = 5
health_check_port = 3000

# Example watched table configuration for mobile hotspots
# [[service.watched_tables]]
# name = "mobile_hotspot_infos"  # Typical table name from account-postgres-sink-service
# change_column = "last_block_height"  # Monitor block height changes instead of timestamp
# primary_key_column = "address"  # Primary key column (could be "id", "address", "pubkey", etc.)
# hotspot_type = "mobile"
# atomic_data_query = """
#   SELECT
#     last_block_height as block_height,  -- Use the actual block height from the record
#     EXTRACT(epoch FROM NOW())::bigint as block_time_seconds,
#     key as pub_key,  -- Helium public key from account data
#     address as asset,  -- Solana NFT address
#     serial_number,
#     device_type,
#     location as asserted_hex,  -- Hex location
#     azimuth,
#     owner,  -- Current NFT owner
#     'direct_owner' as owner_type,  -- Default owner type
#     rewards_recipient
#   FROM mobile_hotspot_infos
#   WHERE address = $PRIMARY_KEY
# """

# Example watched table configuration for IoT hotspots
# [[service.watched_tables]]
# name = "iot_hotspot_infos"  # Typical table name from account-postgres-sink-service
# change_column = "last_block_height"  # Monitor block height changes instead of timestamp
# primary_key_column = "address"  # Primary key column (could be "id", "address", "pubkey", etc.)
# hotspot_type = "iot"
# atomic_data_query = """
#   SELECT
#     last_block_height as block_height,  -- Use the actual block height from the record
#     EXTRACT(epoch FROM NOW())::bigint as block_time_seconds,
#     key as pub_key,  -- Helium public key from account data
#     address as asset,  -- Solana NFT address
#     location as asserted_hex,  -- Hex location
#     elevation,
#     false as is_data_only,  -- Default value, adjust based on your schema
#     owner,  -- Current NFT owner
#     'direct_owner' as owner_type,  -- Default owner type
#     rewards_recipient
#   FROM iot_hotspot_infos
#   WHERE address = $PRIMARY_KEY
# """

[logging]
level = "info"
format = "json"
