[database]
host = "localhost"
port = 5432
username = "postgres"
password = "postgres"
database_name = "helium"
max_connections =  10
min_connections = 2
acquire_timeout_seconds = 60
idle_timeout_seconds = 700
max_lifetime_seconds = 1800

# Required tables that must exist before starting
required_tables = [
  "asset_owners",
  "key_to_assets",
  "recipients",
  "welcome_packs",
  "rewards_recipients",
  "mini_fanouts"
]

# Signing keypair settings
[signing]
keypair_path = "/app/keypair.bin"  # Path to Helium keypair file

# Solana RPC settings
[solana]
rpc_url = "https://api.mainnet-beta.solana.com"
timeout_seconds = 30

[ingestor]
grpc_endpoint = "http://localhost:8080"
timeout_seconds = 30
max_retries = 3
retry_delay_seconds = 5
tls_enabled = false

[service]
polling_interval_seconds = 10
batch_size = 500
max_concurrent_publishes = 5
health_check_port = 3000

# Table validation settings
fail_on_missing_tables = true          # Set to false for graceful degradation
validation_retry_attempts = 3          # Number of retries before giving up
validation_retry_delay_seconds = 30    # Delay between validation retries

# Performance settings
# batch_size controls both database scanning and publishing batch size

# Polling jobs configuration - each job runs a predefined query with parameters
[[service.polling_jobs]]
name = "atomic_mobile_hotspots"
query_name = "construct_atomic_hotspots"
parameters = { hotspot_type = "mobile" }

# IoT hotspot atomic data job (commented out by default)
#[[service.polling_jobs]]
#name = "atomic_iot_hotspots"
#query_name = "construct_atomic_hotspots"
#parameters = { hotspot_type = "iot" }

[logging]
level = "info"
format = "json"
